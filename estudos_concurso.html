<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plano de Estudos - Concursos 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chosen Palette: Calm Harmony (Soft neutrals with Indigo accent) -->
    <!-- Application Structure Plan: A 3-tab SPA. 1: "Visão Geral" showing key exam dates (from CSV) and the study plan generator. 2: "Comparador de Conteúdo" to interactively compare syllabus content by subject (Alerj vs UNIRIO vs TJRJ). 3: "Meu Plano de Estudo" to display the generated daily calendar. This structure directly addresses the user's two requests (syllabus spreadsheet + study schedule) and adds significant value by making the syllabus *comparable* and the plan *actionable*, which is the key task for a student facing multiple exams. -->
    <!-- Visualization & Content Choices: Syllabus (Report Info) -> Goal: Compare -> Viz: Interactive 3-column list (HTML/JS) -> Interaction: Dropdown selects subject -> Justification: Directly shows content overlap/differences. Exam Dates (Report Info) -> Goal: Inform -> Viz: List/Timeline (HTML) -> Interaction: Static. Study Plan (User Request) -> Goal: Organize/Plan -> Viz: HTML Grid Calendar -> Interaction: JS-generated based on user inputs (start date, cycle) -> Justification: Provides a concrete, daily action plan. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .tab-btn {
            transition: all 0.3s ease;
        }
        .tab-btn.active {
            border-bottom-color: #4f46e5;
            color: #4f46e5;
            font-weight: 600;
        }
        .view {
            display: none;
        }
        .view.active {
            display: block;
        }
        .calendar-day {
            min-height: 120px;
        }
        .calendar-day.today {
            background-color: #ebf4ff;
        }
        .calendar-day.other-month {
            background-color: #f9fafb;
            color: #9ca3af;
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-100 text-gray-900">

    <div class="container max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
        
        <header class="mb-6">
            <h1 class="text-3xl font-bold text-indigo-700">Plano de Estudos - Concursos ADM 2025</h1>
            <p class="text-lg text-gray-600">Seu painel para organizar o conteúdo e o cronograma de estudos.</p>
        </header>

        <div class="mb-6 bg-white shadow-sm rounded-lg">
            <nav class="flex border-b border-gray-200" aria-label="Tabs">
                <button id="tab-overview" class="tab-btn active text-gray-600 hover:text-indigo-600 py-4 px-6 border-b-2 border-transparent text-sm font-medium" data-view="view-overview">
                    Visão Geral e Cronograma
                </button>
                <button id="tab-comparator" class="tab-btn text-gray-600 hover:text-indigo-600 py-4 px-6 border-b-2 border-transparent text-sm font-medium" data-view="view-comparator">
                    Comparador de Conteúdo
                </button>
                <button id="tab-plan" class="tab-btn text-gray-600 hover:text-indigo-600 py-4 px-6 border-b-2 border-transparent text-sm font-medium" data-view="view-plan">
                    Meu Plano de Estudo
                </button>
            </nav>
        </div>

        <main>
            <div id="view-overview" class="view active space-y-6">
                <section class="bg-white p-6 rounded-lg shadow-sm">
                    <h2 class="text-2xl font-semibold mb-4 text-indigo-800">Datas Importantes</h2>
                    <p class="text-gray-700 mb-6">Estas são as datas cruciais dos editais. O seu planejamento de estudo será baseado na data da primeira prova.</p>
                    <ul id="timeline-list" class="space-y-4">
                    </ul>
                </section>
                
                <section class="bg-white p-6 rounded-lg shadow-sm">
                    <h2 class="text-2xl font-semibold mb-4 text-indigo-800">Gerador de Plano de Estudo</h2>
                    <p class="text-gray-700 mb-6">Configure seu ciclo de estudos. O sistema criará um calendário diário de matérias, da data de início até a véspera da primeira prova. As matérias se repetirão em ciclo.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="start-date" class="block text-sm font-medium text-gray-700">Data de Início</label>
                            <input type="date" id="start-date" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2">
                        </div>
                        <div>
                            <label for="hours-per-day" class="block text-sm font-medium text-gray-700">Horas de Estudo por Dia (Referência)</label>
                            <input type="number" id="hours-per-day" value="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2">
                        </div>
                    </div>
                    <div class="mt-6">
                        <label class="block text-sm font-medium text-gray-700">Matérias para Incluir no Ciclo</label>
                        <div id="subject-cycle-checklist" class="mt-2 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2">
                        </div>
                    </div>
                    <div class="mt-6">
                        <button id="generate-plan-btn" class="w-full md:w-auto inline-flex justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-6 text-base font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                            Gerar Plano de Estudo
                        </button>
                    </div>
                </section>
            </div>

            <div id="view-comparator" class="view">
                <section class="bg-white p-6 rounded-lg shadow-sm">
                    <h2 class="text-2xl font-semibold mb-4 text-indigo-800">Comparador de Conteúdo Programático</h2>
                    <p class="text-gray-700 mb-6">Selecione uma matéria para ver o que é cobrado em cada um dos três concursos. Isso ajuda a focar nos pontos em comum e a identificar as diferenças.</p>
                    
                    <div>
                        <label for="subject-select" class="block text-sm font-medium text-gray-700">Selecione a Matéria:</label>
                        <select id="subject-select" class="mt-1 block w-full max-w-md rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2">
                        </select>
                    </div>

                    <div id="comparator-output" class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div id="col-alerj" class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                            <h3 class="text-lg font-semibold mb-3 text-gray-800">Alerj - Nível III</h3>
                            <ul class="list-disc list-inside space-y-2 text-sm text-gray-700"></ul>
                        </div>
                        <div id="col-unirio" class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                            <h3 class="text-lg font-semibold mb-3 text-gray-800">UNIRIO - Assist. em Adm.</h3>
                            <ul class="list-disc list-inside space-y-2 text-sm text-gray-700"></ul>
                        </div>
                        <div id="col-tjrj" class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                            <h3 class="text-lg font-semibold mb-3 text-gray-800">TJRJ - Técnico Judiciário</h3>
                            <ul class="list-disc list-inside space-y-2 text-sm text-gray-700"></ul>
                        </div>
                    </div>
                </section>
            </div>
            
            <div id="view-plan" class="view">
                <section class="bg-white p-6 rounded-lg shadow-sm">
                    <div class="flex flex-col sm:flex-row justify-between sm:items-center mb-6">
                        <div>
                            <h2 class="text-2xl font-semibold text-indigo-800">Meu Plano de Estudo</h2>
                            <p class="text-gray-700">Este é o seu calendário de ciclo de estudos até a prova. Lembre-se, a consistência é a chave!</p>
                        </div>
                        <div class="mt-4 sm:mt-0">
                            <button id="prev-month-btn" class="inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">❮</button>
                            <span id="current-month-year" class="text-lg font-semibold mx-4 text-gray-800"></span>
                            <button id="next-month-btn" class="inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">❯</button>
                        </div>
                    </div>

                    <div id="calendar-grid" class="grid grid-cols-7 gap-px bg-gray-200 border border-gray-200 rounded-lg overflow-hidden">
                        <div class="text-center font-semibold py-2 bg-gray-100 text-sm text-gray-600">Dom</div>
                        <div class="text-center font-semibold py-2 bg-gray-100 text-sm text-gray-600">Seg</div>
                        <div class="text-center font-semibold py-2 bg-gray-100 text-sm text-gray-600">Ter</div>
                        <div class="text-center font-semibold py-2 bg-gray-100 text-sm text-gray-600">Qua</div>
                        <div class="text-center font-semibold py-2 bg-gray-100 text-sm text-gray-600">Qui</div>
                        <div class="text-center font-semibold py-2 bg-gray-100 text-sm text-gray-600">Sex</div>
                        <div class="text-center font-semibold py-2 bg-gray-100 text-sm text-gray-600">Sáb</div>
                    </div>
                    <div id="calendar-days" class="grid grid-cols-7 gap-px bg-gray-200">
                    </div>
                </section>
            </div>
        </main>

    </div>

    <script>
        const syllabusData = {
            "Língua Portuguesa": {
                "Alerj": ["Interpretação e compreensão de texto.", "Organização estrutural dos textos.", "Marcas de textualidade: coesão, coerência e intertextualidade.", "Modos de organização discursiva: descrição, narração, exposição, argumentação e injunção.", "Tipos textuais, características específicas de cada tipo.", "Textos literários e não literários.", "Tipologia e estrutura da frase: operações de deslocamento, substituição, modificação e correção.", "Problemas estruturais das frases.", "Norma culta.", "Pontuação e sinais gráficos.", "Organização sintática das frases: termos e orações.", "Ordem direta e inversa.", "Tipos de discurso.", "Registros de linguagem.", "Funções da linguagem.", "Elementos dos atos de comunicação.", "Estrutura e formação de palavras.", "Formas de abreviação.", "Classes de palavras, aspectos morfológicos, sintáticos, semânticos e textuais.", "Semântica: sentido próprio e figurado; antônimos, sinônimos, parônimos e hiperônimos.", "Polissemia e ambiguidade.", "Os dicionários: tipos, organização de verbetes.", "Vocabulário: neologismos, arcaísmos, estrangeirismos, latinismos.", "Ortografia e acentuação gráfica, a crase."],
                "UNIRIO": ["Interpretação e compreensão de texto.", "Tipologia textual.", "Ortografia oficial.", "Acentuação gráfica.", "Emprego das classes de palavras.", "Emprego do sinal indicativo de crase.", "Sintaxe da oração e do período.", "Pontuação.", "Concordância nominal e verbal.", "Regência nominal e verbal.", "Significação das palavras.", "Coesão e coerência."]
            },
            "Raciocínio Lógico-Matemático": {
                "Alerj": ["Proposições, valor-verdade, negação, conjunção, disjunção, implicação, equivalência, proposições compostas.", "Equivalências lógicas.", "Implicações lógicas.", "Tabelas-verdade.", "Argumentos válidos.", "Proposições categóricas.", "Silogismos.", "Quantificadores.", "Conjuntos e suas operações.", "Diagramas.", "Problemas de contagem: princípio aditivo e multiplicativo.", "Arranjos, combinações e permutações.", "Probabilidade e probabilidade condicional.", "Problemas de raciocínio: deduzir informações, raciocínio sequencial, espacial e temporal."],
                "UNIRIO": ["Estruturas lógicas.", "Lógica de argumentação.", "Diagramas lógicos.", "Sequências lógicas.", "Raciocínio lógico-quantitativo: problemas envolvendo frações, conjuntos, porcentagens, sequências, raciocínio lógico simples.", "Raciocínio analítico."]
            },
            "Direito Administrativo": {
                "Alerj": ["Estado, governo e Administração Pública: conceitos, elementos, poderes, natureza, fins e princípios.", "Fontes do Direito Administrativo.", "Organização administrativa da União.", "Administração direta e indireta.", "Entidades paraestatais.", "Agentes públicos.", "Poderes administrativos.", "Ato administrativo.", "Contratos administrativos (Lei nº 14.133/2021).", "Licitação (Lei nº 14.133/2021).", "Serviços públicos.", "Bens públicos.", "Controle e responsabilização da administração.", "Improbidade administrativa (Lei nº 8.429/1992).", "Processo administrativo (Lei nº 9.784/1999).", "Regime Jurídico dos Servidores Públicos Civis da União (Lei nº 8.112/1990)."],
                "UNIRIO": ["Noções de organização administrativa.", "Administração direta e indireta.", "Princípios básicos da administração pública.", "Ato administrativo: conceito, requisitos, atributos, classificação e espécies.", "Poderes e deveres dos administradores públicos.", "Agentes públicos.", "Servidores públicos: cargo, emprego e função.", "Regime Jurídico Único (Lei nº 8.112/1990).", "Processo Administrativo na Administração Pública Federal (Lei nº 9.784/1999)."]
            },
            "Direito Constitucional": {
                "Alerj": ["Constituição: conceito, objeto, elementos e classificações.", "Supremacia da Constituição.", "Aplicabilidade das normas constitucionais.", "Interpretação das normas constitucionais.", "Dos Princípios Fundamentais (Arts. 1º a 4º).", "Dos Direitos e Garantias Fundamentais (Arts. 5º a 17).", "Da Organização do Estado (Arts. 18 e 19, 29 a 43).", "Da Organização dos Poderes (Arts. 44 a 135).", "Processo legislativo.", "Fiscalização contábil, financeira e orçamentária.", "Do Controle de Constitucionalidade.", "Constituição do Estado do Rio de Janeiro."],
                "UNIRIO": []
            },
            "Administração": {
                "Alerj": ["Evolução da Administração.", "Teorias da Administração.", "Processo administrativo: planejamento, organização, direção e controle.", "Gestão de Pessoas: conceitos, motivação, liderança, avaliação de desempenho.", "Gestão da Qualidade.", "Gestão de Projetos.", "Administração de Recursos Materiais e Patrimoniais.", "Orçamento Público: princípios, ciclo orçamentário, LRF.", "Arquivologia: conceitos, gestão de documentos."],
                "UNIRIO": ["Noções de Administração: planejamento, organização, direção e controle.", "Gestão de Pessoas: recrutamento, seleção, treinamento, desenvolvimento, avaliação de desempenho.", "Administração de Recursos Materiais: classificação, aquisição, armazenamento, distribuição.", "Noções de Orçamento Público.", "Noções de Arquivologia: protocolo, arquivo, tipos de arquivo, gestão de documentos."]
            },
            "Legislação": {
                "Alerj": [],
                "UNIRIO": ["Constituição Federal: Título III, Cap. VII (Da Administração Pública).", "Lei nº 8.112/1990 (Regime Jurídico dos Servidores Públicos Civis da União).", "Lei nº 9.784/1999 (Processo Administrativo Federal).", "Lei nº 8.429/1992 (Improbidade Administrativa).", "Decreto nº 1.171/1994 (Código de Ética Profissional do Servidor Público Civil)."]
            }
        };

        const timelineData = [
            { date: "2026-02-01", event: "Prova Objetiva", concurso: "UNIRIO - Assist. em Administração", details: "Manhã" },
            { date: "2026-02-01", event: "Prova Objetiva", concurso: "UNIRIO - Tecnico em análises clínicas - Química", details: "Tarde" },
            { date: "2026-02-08", event: "Prova Objetiva", concurso: "ALERJ - Nível III", details: "15h30 às 20h" },
            { date: "2026-02-03", event: "Recurso Gabarito (Início)", concurso: "UNIRIO", details: "00h" },
            { date: "2026-02-04", event: "Recurso Gabarito (Fim)", concurso: "UNIRIO", details: "23h59min" },
            { date: "2026-02-09", event: "Gabarito Preliminar", concurso: "ALERJ", details: "A partir do 1º dia útil subsequente" },
            { date: "2026-03-25", event: "Resultado Preliminar", concurso: "UNIRIO", details: "Divulgação do resultado" }
        ];

        let studyPlan = [];
        let currentCalendarDate = new Date();
        const allSubjects = Object.keys(syllabusData).filter(subject => {
            return syllabusData[subject]["Alerj"]?.length > 0 || syllabusData[subject]["UNIRIO"]?.length > 0;
        });
        const firstExamDate = new Date(Math.min(...timelineData.filter(d => d.event.includes("Prova")).map(d => new Date(d.date + "T00:00:00-03:00"))));

        document.addEventListener('DOMContentLoaded', () => {
            setupTabs();
            populateTimeline();
            populateSubjectSelector();
            populateSubjectChecklist();
            renderComparator();
            
            const today = new Date();
            document.getElementById('start-date').value = today.toISOString().split('T')[0];
            
            document.getElementById('subject-select').addEventListener('change', renderComparator);
            document.getElementById('generate-plan-btn').addEventListener('click', generateAndRenderPlan);

            document.getElementById('prev-month-btn').addEventListener('click', () => changeMonth(-1));
            document.getElementById('next-month-btn').addEventListener('click', () => changeMonth(1));

            currentCalendarDate = new Date(today.getFullYear(), today.getMonth(), 1);
        });

        function setupTabs() {
            const tabs = document.querySelectorAll('.tab-btn');
            const views = document.querySelectorAll('.view');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    views.forEach(v => v.classList.remove('active'));
                    
                    tab.classList.add('active');
                    document.getElementById(tab.dataset.view).classList.add('active');
                });
            });
        }

        function populateTimeline() {
            const list = document.getElementById('timeline-list');
            list.innerHTML = '';
            
            const sortedData = [...timelineData].sort((a, b) => new Date(a.date + "T00:00:00-03:00") - new Date(b.date + "T00:00:00-03:00"));
            
            sortedData.forEach(item => {
                const li = document.createElement('li');
                const itemDate = new Date(item.date + "T00:00:00-03:00");
                const formattedDate = itemDate.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit', year: 'numeric' });
                
                let bgColor = 'bg-blue-50';
                let textColor = 'text-blue-800';
                
                if (item.event.includes('Prova')) {
                    bgColor = 'bg-red-50';
                    textColor = 'text-red-800';
                } else if (item.event.includes('Gabarito') || item.event.includes('Resultado')) {
                    bgColor = 'bg-green-50';
                    textColor = 'text-green-800';
                }

                li.className = `flex flex-col sm:flex-row justify-between items-start sm:items-center p-4 rounded-lg ${bgColor}`;
                li.innerHTML = `
                    <div class="flex items-center">
                        <span class="font-bold ${textColor} text-lg w-28">${formattedDate}</span>
                        <div class="ml-4">
                            <span class="font-semibold text-gray-900">${item.concurso} - ${item.event}</span>
                            <p class="text-sm text-gray-600">${item.details}</p>
                        </div>
                    </div>
                `;
                list.appendChild(li);
            });
        }

        function populateSubjectSelector() {
            const select = document.getElementById('subject-select');
            select.innerHTML = '';
            allSubjects.forEach(subject => {
                const option = document.createElement('option');
                option.value = subject;
                option.textContent = subject;
                select.appendChild(option);
            });
        }
        
        function populateSubjectChecklist() {
            const checklist = document.getElementById('subject-cycle-checklist');
            checklist.innerHTML = '';
            allSubjects.forEach((subject, index) => {
                const div = document.createElement('div');
                div.className = 'flex items-center';
                div.innerHTML = `
                    <input id="subject-check-${index}" name="subject-cycle" type="checkbox" value="${subject}" checked class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                    <label for="subject-check-${index}" class="ml-2 block text-sm text-gray-900">${subject}</label>
                `;
                checklist.appendChild(div);
            });
        }

        function renderComparator() {
            const selectedSubject = document.getElementById('subject-select').value;
            const data = syllabusData[selectedSubject] || {};

            renderColumn('col-alerj', data.Alerj || []);
            renderColumn('col-unirio', data.UNIRIO || []);
            renderColumn('col-tjrj', data.TJRJ || []);
        }

        function renderColumn(columnId, items) {
            const col = document.getElementById(columnId);
            const ul = col.querySelector('ul');
            ul.innerHTML = '';
            
            if (items.length === 0) {
                ul.innerHTML = '<li class="text-gray-500 italic">Nenhum conteúdo listado para esta matéria.</li>';
                return;
            }
            
            items.forEach(item => {
                const li = document.createElement('li');
                li.textContent = item;
                ul.appendChild(li);
            });
        }
        
        function generateAndRenderPlan() {
            const startDateInput = document.getElementById('start-date').value;
            if (!startDateInput) {
                alert("Por favor, selecione uma data de início.");
                return;
            }
            
            const startDate = new Date(startDateInput + "T00:00:00-03:00");
            const endDate = new Date(firstExamDate.getTime());
            endDate.setDate(endDate.getDate() - 1);

            const subjectCheckboxes = document.querySelectorAll('input[name="subject-cycle"]:checked');
            const cycleSubjects = Array.from(subjectCheckboxes).map(cb => cb.value);

            if (cycleSubjects.length === 0) {
                alert("Por favor, selecione pelo menos uma matéria para o ciclo.");
                return;
            }

            studyPlan = [];
            let currentDate = new Date(startDate.getTime());
            let subjectIndex = 0;
            
            const oneDay = 1000 * 60 * 60 * 24;
            const totalDays = Math.round((endDate - startDate) / oneDay);
            
            if (totalDays < 0) {
                 alert("A data de início deve ser anterior à data da prova.");
                 return;
            }

            for (let i = 0; i <= totalDays; i++) {
                const isoDate = currentDate.toISOString().split('T')[0];
                studyPlan.push({
                    date: isoDate,
                    subject: cycleSubjects[subjectIndex]
                });
                
                currentDate.setDate(currentDate.getDate() + 1);
                subjectIndex = (subjectIndex + 1) % cycleSubjects.length;
            }

            currentCalendarDate = new Date(startDate.getFullYear(), startDate.getMonth(), 1);
            renderCalendar();
            
            document.getElementById('tab-plan').click();
        }

        function renderCalendar() {
            const calendarDays = document.getElementById('calendar-days');
            calendarDays.innerHTML = '';
            
            const month = currentCalendarDate.getMonth();
            const year = currentCalendarDate.getFullYear();
            
            document.getElementById('current-month-year').textContent = `${currentCalendarDate.toLocaleDateString('pt-BR', { month: 'long' })} de ${year}`;
            
            const firstDayOfMonth = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const today = new Date().toISOString().split('T')[0];

            for (let i = 0; i < firstDayOfMonth; i++) {
                const emptyCell = document.createElement('div');
                emptyCell.className = 'calendar-day other-month p-2 border-t border-l border-gray-200 bg-gray-50';
                calendarDays.appendChild(emptyCell);
            }

            for (let day = 1; day <= daysInMonth; day++) {
                const dayCell = document.createElement('div');
                const cellDate = new Date(year, month, day);
                const isoDate = cellDate.toISOString().split('T')[0];
                
                let cellClasses = 'calendar-day relative p-2 border-t border-l border-gray-200 bg-white';
                if (isoDate === today) {
                    cellClasses += ' today';
                }

                dayCell.className = cellClasses;
                
                let dayHtml = `<div class="font-semibold text-sm ${isoDate === today ? 'text-indigo-600' : 'text-gray-800'}">${day}</div>`;
                
                const planEntry = studyPlan.find(entry => entry.date === isoDate);
                
                if (planEntry) {
                    dayHtml += `<div class="mt-1 p-1 bg-indigo-100 rounded-md text-xs text-indigo-800 font-medium truncate">${planEntry.subject}</div>`;
                }

                const examEntry = timelineData.find(entry => entry.date === isoDate && entry.event.includes("Prova"));
                if (examEntry) {
                    dayHtml += `<div class="mt-1 p-1 bg-red-500 rounded-md text-xs text-white font-bold truncate">${examEntry.concurso}</div>`;
                }

                dayCell.innerHTML = dayHtml;
                calendarDays.appendChild(dayCell);
            }
            
            const totalCells = firstDayOfMonth + daysInMonth;
            const remainingCells = 7 - (totalCells % 7);
            if (remainingCells < 7) {
                for (let i = 0; i < remainingCells; i++) {
                     const emptyCell = document.createElement('div');
                     emptyCell.className = 'calendar-day other-month p-2 border-t border-l border-gray-200 bg-gray-50';
                     calendarDays.appendChild(emptyCell);
                }
            }
        }
        
        function changeMonth(delta) {
            currentCalendarDate.setMonth(currentCalendarDate.getMonth() + delta);
            renderCalendar();
        }

    </script>
</body>
</html>
